{%- macro renderSlider(product_list, prefix, cols, url) -%}
<div class="viewport">
	<ul class="overview">
	{%- for p in product_list -%}
		{%- set title  = p.Title.decode('utf-8') -%}
		{%- set author = None -%} {#- default no author -#}
		{%- set section  = p.Categoria_Seccion|string -%}
		{%- set price  = p.PriceAmount|string -%}
		{%- set product_id  = p.ProductId|string -%}
		{%- set product_url  = p.LinkBase -%}
		{%- set format  = p.ProductForm -%}
		{%- if p.ProductForm_desc == None -%}
		    {%- set format_desc  = '' -%}
		{%- else -%}
		    {%- set format_desc  = p.ProductForm_desc.decode('utf-8') -%}
        {%- endif -%}
		{%- if p.Authors[0] -%}
		    {%- set author = p.Authors[0].ContributorName.decode('utf-8') -%}
		    {%- set author_id = p.Authors[0].ContributorId|string -%}
		{%- endif -%}
			{%- if (loop.index % cols) == 1 -%}
			    <li> {#- start row -#}
			    <table>	
				    <tr>
			{%- else -%}
					<td>&nbsp;</td>
			{%- endif -%}
					<td class="product-entry">
                        <a href="{{ product_url }}" title="{{ title }}">
							<img src="{{ url.images ~ p.CoverSmall|e }}" width="98" alt="{{ title }}">
                        </a>

                        {#- POP UP -#}
	                    <div class="product-popup" style="display: none;">
                            {#- TITLE -#}
                            <p><a href="{{ product_url }}">{{ title }}</a></p>
                            {#- AUTHOR -#}
                            <p><a href="/buscador/productos.jsp?seccion={{ section }}&amp;idSeccion={{ section }}&amp;criterioDeOrden=2&amp;claveDeBusqueda=porIDdeAutor&amp;texto={{ author|e }}&amp;idAutor={{ author_id }}">{{ author }}</a></p>
                            <p class="product-price">$ {{ price }}</p>
                            {%- if format == 'BC' -%}
                                <p class="product-format">Libro tapa blanda</p>
                            {%- elif format == 'BB' -%}
                                <p class="product-format">Libro tapa dura</p>
                            {%- elif format[0] == 'B' -%}
                                <p class="product-format">Libro</p>
                            {%- elif format == 'AC' -%}
                                <p class="product-format">CD Audio</p>
                            {%- elif format[0] == 'A' -%}
                                <p class="product-format">M&uacute;sica</p>
                            {%- elif format_desc == 'Cd audio' -%}
                                <p class="product-format">CD Audio</p>
                            {%- elif format == 'DD' -%}
                                <p class="product-format">DVD Video</p>
                            {#- {%- elif format == 'DD' -%} -#}
                            {%- endif -%}
                            {#- BUY -#}
                            <p><a href="javascript:APP.cartAdd({{ product_id }})"
                                    title="agregar al carrito">
                                <img src="{{ url.images }}/imagenes/rediseno/imagenes/seccionTematika/b-comprar.png" alt="agregar al carrito">
                            </a></p>
	                    </div> <!-- p-popup -->
					</td>
	        {%- if loop.index is divisibleby cols -%}
				    </tr>
			    </table>
			    </li> {#- end row -#}
			{%- endif %}
	{%- endfor %}
	{%- if loop.index is divisibleby cols -%}
        {#- fill remaining cols -#}
        {%- for c in range(cols - (loop.index % cols)) -%}
				<td>&nbsp;</td>
				<td>&nbsp;</td>	
        {%- endfor -%}
			</tr>
		</table>
		</li>
	{%- endif %}
	<li><table><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></table></li>
	</ul>
</div>
{%- endmacro -%}
