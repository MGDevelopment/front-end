{%- macro renderSlider(product_list, prefix, cols, url) -%}
<div class="viewport">
	<ul class="overview">
	{%- for p in product_list -%}
		{%- set title  = p.Title.decode('utf-8') -%}
		{%- set author = None -%} {#- default no author -#}
		{%- set section  = p.Categoria_Seccion|string -%}
		{%- set price  = p.PriceAmount|string -%}
		{%- set product_id  = p.ProductId|string -%}
		{%- set product_url  = p.LinkBase -%}
		{%- if p.Authors[0] -%}
		    {%- set author = p.Authors[0].ContributorName.decode('utf-8') -%}
		    {%- set author_id = p.Authors[0].ContributorId|string -%}
		{%- endif -%}
			{%- if (loop.index % cols) == 1 -%}
			    <li> {#- start row -#}
			    <table>	
				    <tr>
			{%- else -%}
					<td>&nbsp;</td>
			{%- endif -%}
					<td class="product-entry">
                        <a href="{{ product_url }}" title="{{ title }}">
							<img src="{{ url.images ~ p.CoverSmall|e }}" width="98" alt="{{ title }}">
                        </a>

                        {#- POP UP CONTENT HOLDER -#}
	                    <div class="product-popup-content">
                            {#- TITLE -#}
                            <p class="product-popup-title">
                                <a href="{{ product_url }}">{{ title }}</a>
                            </p>
                            {#- AUTHOR -#}
                            <p>de <a href="/buscador/productos.jsp?seccion={{ section }}&amp;idSeccion={{ section }}&amp;criterioDeOrden=2&amp;claveDeBusqueda=porIDdeAutor&amp;texto={{ author|e }}&amp;idAutor={{ author_id }}">{{ author }}</a></p>
                            <p class="product-popup-price">$ {{ price }}</p>
		                    {%- if p.ProductForm_desc != None -%}
                                <p class="product-format">
                                    {{- p.ProductForm_desc.decode('utf-8') -}}
                                </p>
                            {%- endif -%}
                            {#- BUY -#}
                            <p>
		                    {%- if p.ProductAvailability == '21' -%}
                                <a href="javascript:APP.cartAdd({{ product_id }})" title="agregar al carrito"><img src="{{ url.images }}/imagenes/rediseno/imagenes/seccionTematika/b-comprar.png" alt="agregar al carrito"></a>
		                    {%- else -%} {#- ProductAvailability == '22' -#}
                                <a href="javascript:if (confirm('Este producto no esta disponible actualmente. Desea hacer un pedido?'))document.location = '/PedidoEspecial?ID_ARTICULO={{ product_id }}';"><img src="{{ url.images}}/imagenes/rediseno/imagenes/seccionTematika/b-pedir.png" alt="Pedir"></a>
                            {%- endif -%}
                            </p>
	                    </div> <!-- p-popup -->
					</td>
	        {%- if loop.index is divisibleby cols -%}
				    </tr>
			    </table>
			    </li> {#- end row -#}
			{%- endif %}
	{%- endfor %}
	{%- if loop.index is divisibleby cols -%}
        {#- fill remaining cols -#}
        {%- for c in range(cols - (loop.index % cols)) -%}
				<td>&nbsp;</td>
				<td>&nbsp;</td>	
        {%- endfor -%}
			</tr>
		</table>
		</li>
	{%- endif %}
	<li><table><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></table></li>
	</ul>
</div>
{%- endmacro -%}
